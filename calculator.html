<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fort Lewis College Nano Lab - Calculators</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <style>
    :root {
      --primary-dark: #004b8d;
      --primary-medium: #007DC3;
      --accent: #FDBB30;
      --light-bg: #f5f7fa;
      --white: #ffffff;
      --text: #333333;
    }

    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--light-bg);
      color: var(--text);
      line-height: 1.6;
    }

    header {
      background: var(--primary-dark);
      color: var(--white);
      padding: 20px 0;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 2.5em;
    }

    header p {
      margin: 5px 0 0;
      color: var(--accent);
      font-size: 1.2em;
    }

    .container {
      display: flex;
      max-width: 1200px;
      margin: 20px auto;
      padding: 20px;
      background: var(--white);
    }

    .sidebar {
      width: 250px;
      background: var(--white);
      padding: 20px;
      border-right: 1px solid #e0e0e0;
      box-shadow: 0 0 5px rgba(0,0,0,0.05);
    }

    .sidebar-section {
      margin-bottom: 30px;
    }

    .sidebar-section h3 {
      margin-top: 0;
      padding-bottom: 8px;
      border-bottom: 1px solid #e0e0e0;
      color: var(--primary-dark);
      font-size: 1.1em;
    }

    .sidebar-section ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }

    .sidebar-section ul li {
      margin-bottom: 8px;
    }

    .sidebar-section ul li a {
      text-decoration: none;
      color: var(--text);
      transition: color 0.2s;
      display: block;
      padding: 5px 0;
    }

    .sidebar-section ul li a:hover {
      color: var(--primary-dark);
    }

    .main-content {
      flex: 1;
      padding: 20px;
      background: var(--white);
    }

    footer {
      background: var(--primary-dark);
      color: var(--white);
      text-align: center;
      padding: 10px 0;
      margin-top: 40px;
    }

    .calculator-card {
      margin-bottom: 30px;
    }

    .calculator-card .card-header {
      background-color: var(--primary-medium);
      color: var(--white);
      font-weight: 500;
    }

    .calculator-card .form-group label {
      font-weight: 500;
    }

    .calculator-result {
      font-weight: bold;
      color: var(--primary-dark);
      font-size: 1.2em;
    }

    .hint {
      font-size: 0.9em;
      color: #555;
    }

    .mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
  </style>
</head>
<body>
  <header>
    <h1>Fort Lewis College Nano Lab</h1>
    <p>Process Calculators</p>
  </header>

  <div class="container">
    <div class="sidebar" id="sidebar">
      <div class="sidebar-section">
        <h3>Navigation</h3>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#" onclick="navigate('projects')">Projects</a></li>
          <li><a href="index.html#" onclick="navigate('papers')">Papers</a></li>
          <li><a href="index.html#" onclick="navigate('sops')">SOPs</a></li>
          <li><a href="index.html#" onclick="navigate('chemicals')">Chemical Lists</a></li>
          <li><a href="calculator.html"><strong>Calculators</strong></a></li>
          <li><a href="webcam.html">Webcam</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <h3>Calculator Tools</h3>
        <ul>
          <li><a href="#exposure-calc">Exposure Calculator</a></li>
          <li><a href="#oxide-thickness">Oxide Thickness Calculator</a></li>
          <li><a href="#diffusion">Diffusion Calculator</a></li>
          <li><a href="#etch-rate">Etch Rate Calculator</a></li>
        </ul>
      </div>
    </div>

    <div class="main-content">
      <h2 class="mb-4">Nanofabrication Calculators</h2>

      <!-- Exposure Calculator -->
      <div class="card calculator-card" id="exposure-calc">
        <div class="card-header">
          Photolithography Exposure Calculator
        </div>
        <div class="card-body">
          <p>Calculate exposure time based on required dose and measured intensity:</p>
          <form id="exposureForm">
            <div class="form-group">
              <label for="requiredDose">Required Dose (mJ/cm²):</label>
              <input type="number" class="form-control" id="requiredDose" placeholder="Enter dose (e.g., 120)">
            </div>
            <div class="form-group">
              <label for="measuredIntensity">Measured UV Intensity (mW/cm²):</label>
              <input type="number" class="form-control" id="measuredIntensity" placeholder="Enter intensity (e.g., 6.7)">
            </div>
            <button type="button" class="btn btn-primary" onclick="calculateExposure()">Calculate</button>
            <div class="mt-3">
              <p>Exposure Time: <span id="exposureResult" class="calculator-result">-</span> seconds</p>
            </div>
          </form>
        </div>
      </div>

      <!-- Oxide Thickness Calculator -->
      <div class="card calculator-card" id="oxide-thickness">
        <div class="card-header">
          Oxide Thickness Calculator (Deal–Grove)
        </div>
        <div class="card-body">
          <p>
            Computes final oxide thickness using the Deal–Grove model:
            <span class="mono">x² + A·x = B·(t + τ)</span>, where <span class="mono">τ = (x0² + A·x0)/B</span>.
          </p>
          <p class="hint">
            Units here are <strong>nm</strong> and <strong>minutes</strong>. You can use the preset A/B (placeholders) or enter your manual’s values.
          </p>

          <form id="oxideForm">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="oxideTimeMin">Oxidation Time (minutes):</label>
                  <input type="number" class="form-control" id="oxideTimeMin" placeholder="e.g., 45" min="0" step="0.1">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="x0nm">Initial Oxide x₀ (nm):</label>
                  <input type="number" class="form-control" id="x0nm" placeholder="e.g., 20 (200 Å)" min="0" step="0.01">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="oxidePreset">Preset (optional):</label>
                  <select class="form-control" id="oxidePreset" onchange="applyOxidePreset()">
                    <option value="">Custom (enter A and B)</option>
                    <option value="dry_1000">Dry O₂ @ 1000°C (placeholder)</option>
                    <option value="wet_1000">Wet (steam) @ 1000°C (placeholder)</option>
                    <option value="dry_1100">Dry O₂ @ 1100°C (placeholder)</option>
                    <option value="wet_1100">Wet (steam) @ 1100°C (placeholder)</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="Anm">Linear Constant A (nm):</label>
                  <input type="number" class="form-control" id="Anm" placeholder="Enter A (nm)" min="0" step="0.0001">
                  <small class="hint">A has units of length (nm).</small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="Bnm2min">Parabolic Constant B (nm²/min):</label>
                  <input type="number" class="form-control" id="Bnm2min" placeholder="Enter B (nm²/min)" min="0" step="0.0001">
                  <small class="hint">B has units of length²/time (nm²/min).</small>
                </div>
              </div>
            </div>

            <button type="button" class="btn btn-primary" onclick="calculateOxide()">Calculate</button>

            <div class="mt-3">
              <p>Final Oxide Thickness x(t): <span id="oxideResult" class="calculator-result">-</span> nm</p>
              <p class="hint">
                Also: x(t) − x₀ = <span id="oxideAdded" class="calculator-result">-</span> nm,
                τ = <span id="oxideTau" class="calculator-result">-</span> min
              </p>
              <p class="hint" id="oxideError" style="color:#b00020; font-weight:600;"></p>
            </div>
          </form>
        </div>
      </div>

      <!-- Etch Rate Calculator -->
      <div class="card calculator-card" id="etch-rate">
        <div class="card-header">
          Etch Rate & Time Calculator
        </div>
        <div class="card-body">
          <p>Calculate % over etch.</p>
          <form id="etchForm">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="originalTime">Original Time (minutes):</label>
                  <input type="number" class="form-control" id="originalTime" placeholder="Enter minutes" min="0">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="originalSeconds">Original Time (seconds):</label>
                  <input type="number" class="form-control" id="originalSeconds" placeholder="Enter seconds" min="0" max="59">
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="percentExtra">Percent Extra (%):</label>
              <input type="number" class="form-control" id="percentExtra" placeholder="Enter percent extra">
            </div>
            <button type="button" class="btn btn-primary" onclick="calculateEtch()">Calculate</button>
            <div class="mt-3">
              <p>Over Etch Time: <span id="etchResult" class="calculator-result">-</span></p>
              <p>Extra Time Added: <span id="extraTimeAdded" class="calculator-result">-</span></p>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>

  <footer>
    <div>FLC NanoLab - <span id="footer-update">Updated: April 2025</span></div>
    <div>Contact <a href="mailto:lascheer@fortlewis.edu" style="color: white;">us</a> with any corrections or suggestions.</div>
  </footer>

  <script>
    // ---------------- Exposure Time Calculator ----------------
    function calculateExposure() {
      const dose = parseFloat(document.getElementById('requiredDose').value);
      const intensity = parseFloat(document.getElementById('measuredIntensity').value);

      if (isNaN(dose) || isNaN(intensity) || intensity === 0) {
        document.getElementById('exposureResult').textContent = 'Error';
        return;
      }

      const exposureTime = dose / intensity;
      document.getElementById('exposureResult').textContent = exposureTime.toFixed(1);
    }

    // ---------------- Etch Calculator ----------------
    function calculateEtch() {
      const originalMinutes = parseFloat(document.getElementById('originalTime').value) || 0;
      const originalSeconds = parseFloat(document.getElementById('originalSeconds').value) || 0;
      const percentExtra = parseFloat(document.getElementById('percentExtra').value);

      if (isNaN(percentExtra)) {
        document.getElementById('etchResult').textContent = 'Error';
        document.getElementById('extraTimeAdded').textContent = 'Error';
        return;
      }

      const totalOriginalSeconds = originalMinutes * 60 + originalSeconds;
      const extraSeconds = totalOriginalSeconds * (percentExtra / 100);
      const totalSeconds = totalOriginalSeconds + extraSeconds;

      const resultMinutes = Math.floor(totalSeconds / 60);
      const resultSeconds = Math.round(totalSeconds % 60);

      const extraMinutes = Math.floor(extraSeconds / 60);
      const extraSecondsRemainder = Math.round(extraSeconds % 60);

      document.getElementById('etchResult').textContent =
          `${resultMinutes} min ${resultSeconds} sec`;
      document.getElementById('extraTimeAdded').textContent =
          `${extraMinutes} min ${extraSecondsRemainder} sec (${percentExtra}%)`;
    }

    // ---------------- Oxide Thickness (Deal–Grove) ----------------
    // NOTE: Presets below are placeholders. Replace A/B with your lab manual’s values.
    const oxidePresets = {
      // A in nm, B in nm^2/min
      dry_1000:  { A: 120.0,  B: 90.0  },   // placeholder
      wet_1000:  { A: 50.0,   B: 400.0 },   // placeholder
      dry_1100:  { A: 80.0,   B: 180.0 },   // placeholder
      wet_1100:  { A: 35.0,   B: 650.0 }    // placeholder
    };

    function clearOxideError() {
      document.getElementById('oxideError').textContent = '';
    }

    function setOxideError(msg) {
      document.getElementById('oxideError').textContent = msg;
    }

    function applyOxidePreset() {
      clearOxideError();

      const key = document.getElementById('oxidePreset').value;
      if (!key) return;

      const p = oxidePresets[key];
      if (!p) return;

      document.getElementById('Anm').value = p.A;
      document.getElementById('Bnm2min').value = p.B;
    }

    function calculateOxide() {
      clearOxideError();

      const t = parseFloat(document.getElementById('oxideTimeMin').value);
      const x0 = parseFloat(document.getElementById('x0nm').value);
      const A = parseFloat(document.getElementById('Anm').value);
      const B = parseFloat(document.getElementById('Bnm2min').value);

      if (isNaN(t) || isNaN(x0) || isNaN(A) || isNaN(B)) {
        setOxideError('Please enter time, x₀, A, and B.');
        document.getElementById('oxideResult').textContent = 'Error';
        document.getElementById('oxideAdded').textContent = 'Error';
        document.getElementById('oxideTau').textContent = 'Error';
        return;
      }

      if (t < 0 || x0 < 0 || A < 0 || B <= 0) {
        setOxideError('Values must be non-negative, and B must be > 0.');
        document.getElementById('oxideResult').textContent = 'Error';
        document.getElementById('oxideAdded').textContent = 'Error';
        document.getElementById('oxideTau').textContent = 'Error';
        return;
      }

      // τ = (x0^2 + A*x0) / B
      const tau = (x0 * x0 + A * x0) / B;

      // Solve x^2 + A*x = B*(t + tau)  ->  x = (-A + sqrt(A^2 + 4*B*(t+tau)))/2
      const inside = A * A + 4.0 * B * (t + tau);
      if (inside < 0) {
        setOxideError('Math error: negative discriminant (check A/B units).');
        document.getElementById('oxideResult').textContent = 'Error';
        document.getElementById('oxideAdded').textContent = 'Error';
        document.getElementById('oxideTau').textContent = 'Error';
        return;
      }

      const x = (-A + Math.sqrt(inside)) / 2.0;
      const added = x - x0;

      document.getElementById('oxideResult').textContent = x.toFixed(2);
      document.getElementById('oxideAdded').textContent = added.toFixed(2);
      document.getElementById('oxideTau').textContent = tau.toFixed(2);
    }
  </script>
</body>
</html>

